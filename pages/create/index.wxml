<view class="page">
  <!-- Top App Bar -->
  <view class="top-bar">
    <view class="back-btn" bindtap="onBack">
      <text class="back-icon">←</text>
    </view>
    <text class="h4 font-bold text-dark">发布活动</text>
    <view class="spacer-small"></view>
  </view>

  <scroll-view scroll-y="true" class="form-container">
    <!-- Event Details Section -->
    <view class="form-section">
      <text class="section-heading">活动信息</text>
      
      <view class="form-field">
        <text class="field-label">活动名称 <text class="required">*</text></text>
        <input 
          class="field-input" 
          placeholder="例如：周末羽毛球活动" 
          value="{{formData.title}}"
          bindinput="onTitleInput"
        />
      </view>

      <view class="form-field">
        <text class="field-label">活动类型 <text class="required">*</text></text>
        <picker mode="selector" range="{{sports}}" value="{{sportIndex}}" bindchange="onSportChange">
          <view class="field-picker">
            <text class="picker-text">{{sports[sportIndex]}}</text>
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>

      <view class="form-field">
        <text class="field-label">所属俱乐部（可选）</text>
        <picker mode="selector" range="{{clubs}}" value="{{clubIndex}}" bindchange="onClubChange">
          <view class="field-picker">
            <text class="picker-text">{{clubs[clubIndex]}}</text>
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- Logistics Section -->
    <view class="form-section">
      <text class="section-heading">时间与地点</text>
      
      <view class="form-row">
        <view class="form-field half">
          <text class="field-label">日期 <text class="required">*</text></text>
          <picker mode="date" value="{{formData.date}}" bindchange="onDateChange">
            <view class="field-picker">
              <text class="picker-text">{{formData.date || '选择日期'}}</text>
            </view>
          </picker>
        </view>

        <view class="form-field half">
          <text class="field-label">时间 <text class="required">*</text></text>
          <picker mode="time" value="{{formData.time}}" bindchange="onTimeChange">
            <view class="field-picker">
              <text class="picker-text">{{formData.time || '选择时间'}}</text>
            </view>
          </picker>
        </view>
      </view>

      <view class="form-field">
        <text class="field-label">地点 <text class="required">*</text></text>
        <view class="field-input-with-icon">
          <text class="input-icon">📍</text>
          <input 
            class="field-input-icon" 
            placeholder="例如：世纪公园羽毛球中心" 
            value="{{formData.location}}"
            bindinput="onLocationInput"
          />
        </view>
      </view>

      <view class="form-field">
        <text class="field-label">最多参加人数 <text class="required">*</text></text>
        <input 
          class="field-input" 
          type="number" 
          placeholder="至少 2 人" 
          value="{{formData.maxParticipants}}"
          bindinput="onMaxParticipantsInput"
        />
      </view>
    </view>

    <!-- Description Section -->
    <view class="form-section">
      <text class="section-heading">活动描述</text>
      
      <view class="form-field">
        <text class="field-label">活动说明（可选）</text>
        <textarea 
          class="field-textarea" 
          placeholder="可填写规则、水平要求、自带装备、集合点等" 
          value="{{formData.description}}"
          bindinput="onDescriptionInput"
        />
      </view>
    </view>

    <!-- Bottom Spacer -->
    <view style="height: 200rpx"></view>
  </scroll-view>

  <!-- Floating Publish Button -->
  <view class="publish-bar">
    <button class="btn-publish" bindtap="onPublish">
      <text>发布活动</text>
    </button>
  </view>
  <custom-tab-bar></custom-tab-bar>
</view>
