<view class="page">
  <!-- é¡¶éƒ¨æ ‡é¢˜ -->
  <view class="top-bar">
    <view class="search-icon"></view>
    <text class="h3 font-bold text-dark">æ´»åŠ¨</text>
    <view class="spacer"></view>
  </view>

  <!-- è¿åŠ¨ç±»å‹ç­›é€‰ -->
  <scroll-view scroll-x="true" class="filter-container">
    <view class="filter-chips">
      <block wx:for="{{sportFilters}}" wx:key="name">
        <view class="chip {{item.selected ? 'chip-primary' : 'chip-outline'}}" bindtap="onSportSelect" data-index="{{index}}">
          <text class="sport-emoji">{{item.icon}}</text>
          <text>{{item.name}}</text>
        </view>
      </block>
    </view>
  </scroll-view>

  <!-- æ—¥æœŸç­›é€‰ -->
  <scroll-view scroll-x="true" class="filter-container border-bottom">
    <view class="filter-chips">
      <block wx:for="{{dateFilters}}" wx:key="name">
        <view class="chip-date {{item.selected ? 'chip-date-active' : 'chip-date-outline'}}" bindtap="onDateSelect" data-index="{{index}}">
          <text>{{item.name}}</text>
        </view>
      </block>
    </view>
  </scroll-view>

  <!-- Loading State -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-indicator"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view wx:if="{{!loading}}" class="events-list">
    <block wx:for="{{events}}" wx:key="id">
      <view class="event-card" bindtap="onViewDetail" data-id="{{item.id}}">
        <view class="event-header">
          <view class="row items-center gap-16 flex-1">
            <view class="sport-icon-container">
              <text class="sport-icon-text">{{item.sportIcon}}</text>
            </view>
            <view class="flex-1">
              <text class="event-title">{{item.title}}</text>
              <text class="event-club">{{item.clubName || 'å…¬å¼€æ´»åŠ¨'}}</text>
            </view>
          </view>
          <button class="btn {{item.joined ? 'btn-joined' : 'btn-join'}}" catchtap="onJoinTap" data-id="{{item.id}}" disabled="{{!item.joined && item.disableJoin}}">
            <text>{{item.joined ? 'é€€å‡º' : 'å‚åŠ '}}</text>
          </button>
        </view>
        <view class="event-details">
          <view class="detail-row">
            <text class="detail-icon">ğŸ“…</text>
            <text>{{item.dateTime}}</text>
          </view>
          <view class="detail-row">
            <text class="detail-icon">ğŸ“</text>
            <text>{{item.location}}</text>
          </view>
          <view class="detail-row">
            <text class="detail-icon">ğŸ‘¥</text>
            <text>{{item.participants}}/{{item.maxParticipants}} å·²æŠ¥å â€¢ </text>
            <text class="{{item.statusClass}}">{{item.statusLabel}}</text>
          </view>
          <view class="detail-row">
            <text class="detail-icon">ğŸ‘¤</text>
            <text>ç»„ç»‡è€…ï¼š{{item.organizer}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- Empty State -->
    <view wx:if="{{events.length === 0}}" class="empty-state">
      <view class="empty-icon-container">
        <text class="empty-icon">ğŸ“…</text>
      </view>
      <text class="empty-title">æš‚æ— æ´»åŠ¨</text>
      <text class="empty-subtitle">è¯•è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–ç¨åå†æ¥</text>
    </view>
  </view>

  <!-- Custom Tab Bar space -->
  <view style="height: 160rpx"></view>

  <custom-tab-bar></custom-tab-bar>
</view>
